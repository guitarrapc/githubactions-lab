name: restore aws oidc auth from cache
description: |
  restore aws oidc auth from cache
inputs:
  cache-key:
    description: "cache key to restore"
    required: true
runs:
  using: "composite"
  steps:
    - name: Restore aws auth
      uses: actions/cache@v2
      with:
        path: |
          ~/.aws/
        key: ${{ inputs.cache-key }}
    - name: Restore ENV
      run: |
        echo "AWS_DEFAULT_REGION=$(head -n 1 ~/.aws/default_region)" >> "$GITHUB_ENV"
        echo "AWS_REGION=$(head -n 1 ~/.aws/default_region)" >> "$GITHUB_ENV"
      shell: bash
