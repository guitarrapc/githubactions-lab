name: container service
on:
    workflow_dispatch:
    push:
        branches: ["main"]
    pull_request:
        branches: ["main"]

jobs:
    container:
        permissions:
            contents: read
        runs-on: ubuntu-24.04
        timeout-minutes: 10
        services:
            redis:
                image: redis:8
                ports:
                    - 6379:6379
        steps:
            - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
              with:
                  persist-credentials: false
            - uses: actions/setup-go@4dc6199c7b1a012772edbd06daecab0f50c9053c # v6.1.0
              with:
                  go-version: "1.25"
            - name: Show Go version
              run: go version
            - name: Run Go program
              run: go run main.go
              working-directory: ./src/go-db
