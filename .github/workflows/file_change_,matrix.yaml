name: file change detect matrix
on: [pull_request]
jobs:
  changes:
    runs-on: ubuntu-latest
    timeout-minutes: 3
    outputs:
      changes: ${{ steps.filter.outputs.changes }}
    steps:
      - uses: actions/checkout@v3
      - uses: dorny/paths-filter@v2
        id: paths-filter
        with:
          filters: |
            {"target": "workflows","path": ".github/workflows"}:
              - .github/workflows/**
            {"target": "actions","path": ".github/actions"}:
              - .github/actions/**
            {"target": "scripts","path": ".github/scripts"}:
              - .github/scripts/**
            {"target": "dotnet","path": "src/dotnet"}:
              - src/dotnet/**
            {"target": "json","path": "src/json"}:
              - src/json/**
            {"target": "k8s","path": "src/k8s"}:
              - src/k8s/**
            {"target": "mermaid","path": "src/mermaid"}:
              - src/mermaid/**
            {"target": "shellscript","path": "src/shellscript"}:
              - src/shellscript/**
            {"target": "txt","path": "src/txt"}:
              - src/txt/**
            {"target": "README","path": "README.md"}:
              - README.md
      - name: output filter
        id: filter
        run: echo changes='${{ steps.paths-filter.outputs.changes }}' >> "$GITHUB_OUTPUT"
      - name: output
        run: echo "${{ steps.filter.outputs.changes }}"
